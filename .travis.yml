lanuage: generic
sudo: false
ignore:
  - examples/*
env:
  - GOARCH=amd64
notifications:
  email:
    on_success: change
    on_failure: always

sudo: required

services:
  - docker

script: make

after_success:
  - git config --global user.email "builds@travis-ci.com"
  - git config --global user.name "Travis CI"
  - export GIT_TAG=build-$TRAVIS_BRANCH-$(date -u "+%Y-%m-%d-%H-%M-%S")-$TRAVIS_BUILD_NUMBER
  - git tag $GIT_TAG -a -m "Generated tag from TravisCI build $TRAVIS_BUILD_NUMBER"
  - git push origin $GIT_TAG
